# 钠冷快堆热力系统设计

### 基本信息

- 课程：NU317 热力系统综合设计与实践

- 作者：李梓康

- 日期：2021年春

- 第三方模块依赖：

  | thremostate                | matplotlib           | numpy                                        | colorama                       |
  | -------------------------- | -------------------- | -------------------------------------------- | ------------------------------ |
  | 不可或缺！用于调用工质物性 | 重要。用于绘制温熵图 | 普通。仅用于插值生成平滑曲线，可重造轮子替代 | 普通。仅用于设置打印信息的颜色 |

  在```main.py```程序开始时，会调用```pip```工具检查依赖，**请确保```pip```工具已安装，并在管理员模式下启动命令行运行```main.py```**。若依赖均已安装，可忽略并自行删去相关代码。

### 程序设计

- **程序架构**

  程序分为5个程序文件：

  - 主程序```main.py```
  - 计算程序```iteration.py```
  - 物性程序```substance.py```
  - 绘图程序```diagram.py```
  - 优化程序```optimization.py```

  以及3个数据文件：

  - 单一状态参数```input-mid.json```
  - 迭代下限状态参数```input-low.json```
  - 迭代上限状态参数```input-high.json```

- **主程序```main.py```**

  主程序从3个json文件中读入状态参数，然后向用户询问迭代方式：单一状态（不迭代）、贪心算法迭代或遗传算法迭代，并根据用户选择启动相应的迭代过程。

- **计算程序```iteration.py```**

  基于已封装的```sunstance```模块计算布雷顿循环。根据主程序传入的参数，结合等压或等熵确定各点的热力状态，然后根据热平衡和功率平衡计算分配比和效率。若分配比或效率不合理，则报错。最后打印计算结果，并调用绘图程序。

- **物性程序```substance.py```**

  封装了```thermostate```库，更加适合本项目的编码。

  返回值均为浮点数，单位约定如下：

  | 参数 | 单位           |
  | ---- | -------------- |
  | 压力 | ```MPa```      |
  | 温度 | ```℃```        |
  | 焓   | ```J/kg```     |
  | 熵   | ```J/(kg·K)``` |

- **绘图程序```diagram.py```**

  基于```matplotlib.pyplot```绘图。函数```ts_diagram()```读入关键的状态参数，据此绘制散点图，然后根据热力过程连接各点。其中等压过程为曲线，需要调用函数```smooth_diagram()```对等压过程进行插值，实现平滑曲线的绘制。

- 优化程序```optimization.py```

- 单一状态参数```input-mid.json```
- 迭代下限状态参数```input-low.json```
- 迭代上限状态参数```input-high.json```